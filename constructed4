Filter by multiple group_vars , existing ansible_facts  as well as injected ansible_facts



plugin: constructed
strict: true
groups:
  shutdown: resolved_state == "shutdown"
  target_group: resolved_state == "shutdown" and account_alias == "product_dev" and ansible_distribution == "RedHat" and my_fact | default("none") != "ignore"
compose:
  resolved_state: state | default("running")
